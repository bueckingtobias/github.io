<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bücking Immobilien GmbH & Co. KG</title>

  <style>
    :root{
      --brand:#004225;          /* Smyrna-Grün */
      --brand-700:#00361e;
      --text:#ffffff;
      --bg:#004225;
      --muted:#ffffff1a;
      --shadow:0 2px 10px rgba(0,0,0,.25);
      --radius:12px;
      --maxw:1200px;
      --nav-h:46px;

      /* werden per JS präzise gesetzt */
      --header-h: 110px;         /* Fallback */
      --footer-h: 64px;          /* Fallback */
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    *{ box-sizing:border-box }
    html,body{
      margin:0; padding:0;
      font-family:"Avenir",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:var(--bg);
      scroll-behavior:smooth;
    }

    /* sorgt dafür, dass Anker-Scroll nicht unter dem Header verschwindet */
    html{ scroll-padding-top: calc(var(--header-h) + 10px) }

    /* ===== Header (fix) ===== */
    header.site-header{
      position:fixed; top:0; left:0; right:0; z-index:1000;
      background:var(--brand-700);
      color:var(--text);
      box-shadow:var(--shadow);
    }

    .header-top{ display:grid; place-items:center; padding:14px 16px; }
    .brand-link{ display:inline-flex; align-items:center; gap:10px; color:var(--text); text-decoration:none; }
    .brand-logo{ height:46px; width:auto; display:block; filter:brightness(0) invert(1); }

    .header-nav{
      display:flex; align-items:center; justify-content:center;
      border-top:1px solid rgba(255,255,255,.15);
      min-height:var(--nav-h); padding:0 8px; position:relative;
    }
    nav.primary{ display:none; }
    nav.primary ul{ list-style:none; margin:0; padding:0; display:flex; gap:28px; align-items:center; }
    nav.primary a{ color:var(--text); text-decoration:none; font-weight:700; padding:10px 6px; border-radius:8px; transition:opacity .2s ease; }
    nav.primary a:hover{ opacity:.8; }
    nav.primary a[aria-current="page"]{ text-decoration:underline; }

    /* Hamburger mobil */
    .menu-toggle{
      position:absolute; right:8px; width:44px; height:44px;
      border:0; background:transparent; color:var(--text);
      display:grid; place-items:center; border-radius:8px; cursor:pointer;
    }
    .menu-icon, .menu-icon::before, .menu-icon::after{
      content:""; display:block; width:22px; height:2px;
      background:var(--text); border-radius:2px; transition:transform .25s ease, opacity .2s ease;
    }
    .menu-icon::before{ transform:translateY(-7px) } .menu-icon::after{ transform:translateY(5px) }
    .menu-toggle[aria-expanded="true"] .menu-icon{ transform:rotate(45deg) }
    .menu-toggle[aria-expanded="true"] .menu-icon::before{ transform:rotate(90deg) }
    .menu-toggle[aria-expanded="true"] .menu-icon::after{ opacity:0 }

    .drawer-backdrop{
      position:fixed; inset:0; background:rgba(0,0,0,.4);
      opacity:0; pointer-events:none; transition:opacity .25s ease; z-index:999;
    }
    .drawer{
      position:fixed;
      left:0; right:0;
      top:var(--header-h);                 /* exakt unter dem sichtbaren Header */
      bottom:calc(var(--footer-h) + var(--safe-bottom)); /* endet über fixem Footer */
      background:var(--brand); color:var(--text);
      transform:translateY(-8px); opacity:0; pointer-events:none;
      border-bottom:1px solid rgba(255,255,255,.15);
      box-shadow:0 10px 25px rgba(0,0,0,.25);
      transition:transform .25s ease, opacity .25s ease; z-index:1001;
      overflow:auto; -webkit-overflow-scrolling:touch;
    }
    .drawer.open, .drawer-backdrop.open{ pointer-events:auto }
    .drawer.open{ transform:translateY(0); opacity:1 }
    .drawer-backdrop.open{ opacity:1 }
    .drawer nav{ padding:14px 16px 18px }
    .drawer ul{ list-style:none; margin:0; padding:0; display:grid; gap:8px }
    .drawer a{
      display:block; text-decoration:none; color:var(--text); font-weight:700;
      padding:12px 10px; border-radius:10px; background:var(--muted)
    }

    @media (min-width:900px){
      nav.primary{ display:block } .menu-toggle{ display:none } .drawer, .drawer-backdrop{ display:none }
    }

    /* ===== Main ===== */
    main{
      max-width:var(--maxw);
      margin:0 auto;
      padding: calc(var(--header-h)) 0 calc(var(--footer-h) + var(--safe-bottom)); /* Platz für fixen Header & Footer */
    }
    .section-host{ display:grid; gap:32px; }

    /* ===== Footer (fix) ===== */
    footer.site-footer{
      position:fixed; left:0; right:0; bottom:0; z-index:1000;
      background:var(--brand-700); color:var(--text);
      text-align:center; padding:14px 18px calc(14px + var(--safe-bottom));
      font-size:.95rem; box-shadow:0 -2px 10px rgba(0,0,0,.25);
    }
  </style>
</head>

<body>
  <header class="site-header" role="banner">
    <div class="header-top">
      <a class="brand-link" href="index.html#top" aria-label="Zur Startseite">
        <img class="brand-logo" src="logo.png" alt="Bücking Immobilien Logo" />
      </a>
    </div>

    <div class="header-nav">
      <nav class="primary" aria-label="Hauptnavigation">
        <ul>
          <li><a href="index.html#home" aria-current="page">Home</a></li>
          <li><a href="projekte.html">Projekte</a></li>
          <li><a href="unternehmen.html">Unternehmen</a></li>
          <li><a href="kontakt.html">Kontakt</a></li>
          <li><a href="impressum.html">Impressum</a></li>
        </ul>
      </nav>

      <button class="menu-toggle" aria-label="Menü öffnen" aria-expanded="false" aria-controls="mobile-drawer">
        <span class="menu-icon"></span>
      </button>
    </div>

    <div class="drawer-backdrop" id="drawer-backdrop" hidden></div>
    <div class="drawer" id="mobile-drawer" role="dialog" aria-modal="true" aria-label="Navigation" hidden>
      <nav aria-label="Mobile Navigation">
        <ul>
          <li><a href="index.html#home" aria-current="page">Home</a></li>
          <li><a href="projekte.html">Projekte</a></li>
          <li><a href="unternehmen.html">Unternehmen</a></li>
          <li><a href="kontakt.html">Kontakt</a></li>
          <li><a href="impressum.html">Impressum</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="top">
    <div id="section-host" class="section-host" aria-live="polite"></div>
  </main>

  <footer class="site-footer">
    &copy; 2025 Bücking Immobilien GmbH &amp; Co. KG – Alle Rechte vorbehalten
  </footer>

  <script>
    /* ===== Höhen dynamisch als Variablen setzen ===== */
    function updateChromeVars(){
      const header = document.querySelector('.site-header');
      const footer = document.querySelector('.site-footer');
      const root   = document.documentElement;

      const headerH = header?.offsetHeight || 110;
      const footerH = footer?.offsetHeight || 64;

      root.style.setProperty('--header-h', headerH + 'px');
      root.style.setProperty('--footer-h', footerH + 'px');
    }
    window.addEventListener('load', updateChromeVars);
    window.addEventListener('resize', () => { clearTimeout(window.__rz); window.__rz = setTimeout(updateChromeVars, 100); });

    /* ===== Mobiles Menü ===== */
    const body=document.body, toggle=document.querySelector('.menu-toggle'),
          drawer=document.getElementById('mobile-drawer'),
          backdrop=document.getElementById('drawer-backdrop');

    const openMenu=()=>{ 
      toggle.setAttribute('aria-expanded','true');
      drawer.hidden=false; backdrop.hidden=false;
      requestAnimationFrame(()=>{
        drawer.classList.add('open'); backdrop.classList.add('open');
        body.style.overflow='hidden';
        const firstLink=drawer.querySelector('a'); firstLink&&firstLink.focus();
      });
    };
    const closeMenu=()=>{ 
      toggle.setAttribute('aria-expanded','false');
      drawer.classList.remove('open'); backdrop.classList.remove('open');
      body.style.overflow='';
      setTimeout(()=>{ drawer.hidden=true; backdrop.hidden=true; },200); toggle.focus();
    };
    toggle.addEventListener('click',()=>toggle.getAttribute('aria-expanded')==='true'?closeMenu():openMenu());
    backdrop.addEventListener('click',closeMenu);
    window.addEventListener('keydown',e=>{ if(e.key==='Escape') closeMenu(); });

    /* ===== Module: dynamisches Laden (mit Style-Hoisting) ===== */
    // Zitat soll über Leitbild -> Reihenfolge angepasst
    const files = ['landing.html','zitat.html','leitbild.html','ueber-uns.html'];
    const host=document.getElementById('section-host');

    async function loadSection(file){
      try{
        const res=await fetch(file,{cache:'no-store'});
        if(!res.ok) throw new Error(file+' '+res.status);
        const html=await res.text();

        const range = document.createRange();
        const frag  = range.createContextualFragment(html);

        // Inline-Styles in den Head heben (Glas/Animationen)
        frag.querySelectorAll('style').forEach(styleTag=>{
          document.head.appendChild(styleTag.cloneNode(true));
          styleTag.remove();
        });
        frag.querySelectorAll('link[rel="stylesheet"]').forEach(linkTag=>{
          document.head.appendChild(linkTag.cloneNode(true));
          linkTag.remove();
        });

        const wrapper=document.createElement('div');
        wrapper.className='module';
        wrapper.appendChild(frag);
        host.appendChild(wrapper);
      }catch(err){ console.error(err); }
    }
    (async()=>{ for(const f of files){ await loadSection(f); } })();
  </script>
</body>
</html>
